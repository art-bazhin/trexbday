function redrawItems(){for(var e=0;e<items.length;e++)items[e].classList.contains("carousel__item--active")&&(itemsContainer.style.transform="translateX(-"+100*e/items.length+"%)")}function nextItem(e){e.preventDefault();var t=document.getElementsByClassName("carousel__item carousel__item--active")[0],o=document.getElementsByClassName("carousel__item-button carousel__item-button--active")[0];t.classList.remove("carousel__item--active"),o.classList.remove("carousel__item-button--active"),null!=t.nextElementSibling?(t.nextElementSibling.classList.add("carousel__item--active"),o.nextElementSibling.classList.add("carousel__item-button--active")):(items[0].classList.add("carousel__item--active"),itemButtons[0].classList.add("carousel__item-button--active")),redrawItems()}function prevItem(e){e.preventDefault();var t=document.getElementsByClassName("carousel__item carousel__item--active")[0],o=document.getElementsByClassName("carousel__item-button carousel__item-button--active")[0];t.classList.remove("carousel__item--active"),o.classList.remove("carousel__item-button--active"),null!=t.previousElementSibling?(t.previousElementSibling.classList.add("carousel__item--active"),o.previousElementSibling.classList.add("carousel__item-button--active")):(items[items.length-1].classList.add("carousel__item--active"),itemButtons[items.length-1].classList.add("carousel__item-button--active")),redrawItems()}function itemButtonClick(e){e.preventDefault();var t=document.getElementsByClassName("carousel__item carousel__item--active")[0],o=document.getElementsByClassName("carousel__item-button carousel__item-button--active")[0];t.classList.remove("carousel__item--active"),o.classList.remove("carousel__item-button--active"),e.target.classList.add("carousel__item-button--active");for(var a=0;a<itemButtons.length;a++)itemButtons[a].classList.contains("carousel__item-button--active")&&items[a].classList.add("carousel__item--active");redrawItems()}function openModalWindow(e){e.preventDefault(),modalWindow.classList.add("modal--active"),form.classList.add("modal__form--active")}function closeModalWindow(e){e.preventDefault(),modalWindow.classList.remove("modal--active"),info.classList.remove("modal__info--active")}function validateForm(){var e=!0;return""==nameField.value?(nameField.classList.remove("modal__field--good"),nameGoodIcon.classList.remove("modal__icon--active"),nameField.classList.add("modal__field--error"),nameErrorIcon.classList.add("modal__icon--active"),nameErrorMessage.classList.add("modal__error--active"),e=!1):(nameField.classList.add("modal__field--good"),nameGoodIcon.classList.add("modal__icon--active"),nameField.classList.remove("modal__field--error"),nameErrorIcon.classList.remove("modal__icon--active"),nameErrorMessage.classList.remove("modal__error--active")),""==textField.value?(textField.classList.remove("modal__field--good"),textGoodIcon.classList.remove("modal__icon--active"),textField.classList.add("modal__field--error"),textErrorIcon.classList.add("modal__icon--active"),textErrorMessage.classList.add("modal__error--active"),e=!1):(textField.classList.add("modal__field--good"),textGoodIcon.classList.add("modal__icon--active"),textField.classList.remove("modal__field--error"),textErrorIcon.classList.remove("modal__icon--active"),textErrorMessage.classList.remove("modal__error--active")),e}function clearForm(){nameField.classList.remove("modal__field--good"),nameField.classList.remove("modal__field--error"),nameErrorIcon.classList.remove("modal__icon--active"),nameGoodIcon.classList.remove("modal__icon--active"),nameErrorMessage.classList.remove("modal__error--active"),textField.classList.remove("modal__field--good"),textField.classList.remove("modal__field--error"),textErrorIcon.classList.remove("modal__icon--active"),textGoodIcon.classList.remove("modal__icon--active"),textErrorMessage.classList.remove("modal__error--active"),nameField.value="",textField.value=""}function updateNumber(){if(null!=localStorage.getItem("trexnumber")){var e=localStorage.getItem("trexnumber");e++,localStorage.setItem("trexnumber",e)}else localStorage.setItem("trexnumber",1)}function writeNumber(){null!=localStorage.getItem("trexnumber")&&(trexNumber.textContent=localStorage.getItem("trexnumber"))}function submitForm(e){if(e.preventDefault(),validateForm()){var t=new XMLHttpRequest,o="name="+encodeURIComponent(nameField.value)+"congratulation="+encodeURIComponent(textField.value);t.open("GET","./server?"+o,!0),t.onreadystatechange=function(){if(4==this.readyState)return 200!=this.status?void console.log("AJAX request failed"):void 0},t.send(),updateNumber(),writeNumber(),form.classList.remove("modal__form--active"),info.classList.add("modal__info--active"),clearForm()}}function timer(){var e=new Date,t=Math.floor((BIRTHDAY-e)/1e3);t<0&&(t=0);var o=Math.floor(t/3600);t%=3600;var a=Math.floor(t/60);t%=60,secondsSpan.textContent=t<10?"0"+t:t,minutesSpan.textContent=a<10?"0"+a:a,hoursSpan.textContent=o<10?"0"+o:o}var buttonPrev=document.getElementsByClassName("carousel__move-button carousel__move-button--prev")[0],buttonNext=document.getElementsByClassName("carousel__move-button carousel__move-button--next")[0],items=document.getElementsByClassName("carousel__item"),itemButtons=document.getElementsByClassName("carousel__item-button"),itemsContainer=document.getElementsByClassName("carousel__items-container")[0];buttonNext.onclick=nextItem,buttonPrev.onclick=prevItem;for(var i=0;i<itemButtons.length;i++)itemButtons[i].onclick=itemButtonClick;var sendCardButton=document.getElementById("sendCardButton"),modalWindow=document.getElementsByClassName("modal")[0],form=document.getElementsByClassName("modal__form")[0],info=document.getElementsByClassName("modal__info")[0],nameField=document.getElementsByClassName("modal__field modal__field--name")[0],textField=document.getElementsByClassName("modal__field modal__field--text")[0],nameErrorMessage=document.getElementsByClassName("modal__error modal__error--name")[0],textErrorMessage=document.getElementsByClassName("modal__error modal__error--text")[0],nameErrorIcon=document.getElementsByClassName("modal__icon modal__icon--name modal__icon--error")[0],nameGoodIcon=document.getElementsByClassName("modal__icon modal__icon--name modal__icon--good")[0],textErrorIcon=document.getElementsByClassName("modal__icon modal__icon--text modal__icon--error")[0],textGoodIcon=document.getElementsByClassName("modal__icon modal__icon--text modal__icon--good")[0],closeButtons=document.getElementsByClassName("modal__close-button"),trexNumber=document.getElementsByClassName("modal__number")[0];form.onsubmit=submitForm,sendCardButton.onclick=openModalWindow;for(var i=0;i<closeButtons.length;i++)closeButtons[i].onclick=closeModalWindow;var secondsSpan=document.getElementsByClassName("timer__time-unit timer__time-unit--seconds")[0],minutesSpan=document.getElementsByClassName("timer__time-unit timer__time-unit--minutes")[0],hoursSpan=document.getElementsByClassName("timer__time-unit timer__time-unit--hours")[0],BIRTHDAY=new Date(2016,8,24);timer(),setInterval(timer,1e3);